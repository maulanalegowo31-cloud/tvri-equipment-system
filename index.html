<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistem Pencatatan Alat Digital TVRI World</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay">
        <div class="loading-content">
            <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
            <p class="mt-3">Memuat data inventaris...</p>
        </div>
    </div>

    <div class="container-fluid">
        <!-- Header -->
        <div class="header-section">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-md-8">
                        <h1 class="mb-2">
                            <i class="fas fa-tv"></i>
                            Sistem Pencatatan Alat Digital
                        </h1>
                        <p class="lead mb-0">TVRI World - Jendela Dunia Untuk Indonesia</p>
                    </div>
                    <div class="col-md-4 text-md-end">
                        <div id="demoModeIndicator" class="demo-mode-indicator mb-2" style="display: none;">
                            <i class="fas fa-flask"></i> Mode Demo
                        </div>
                        <div class="connection-status" id="connectionStatus">
                            <i class="fas fa-circle text-success"></i>
                            <span>Terhubung</span>
                        </div>
                        <button class="btn btn-outline-light btn-sm mt-2" onclick="refreshData()">
                            <i class="fas fa-sync-alt"></i> Refresh Data
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="container mt-4">
            <!-- Alert Messages -->
            <div id="alertContainer"></div>

            <!-- Statistics Cards -->
            <div class="row mb-4" id="statsSection">
                <div class="col-md-3">
                    <div class="stat-card">
                        <div class="stat-icon bg-primary">
                            <i class="fas fa-boxes"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="totalEquipment">0</h3>
                            <p>Total Alat</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="stat-card">
                        <div class="stat-icon bg-success">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="availableEquipment">0</h3>
                            <p>Tersedia</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="stat-card">
                        <div class="stat-icon bg-warning">
                            <i class="fas fa-hand-holding"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="borrowedEquipment">0</h3>
                            <p>Dipinjam</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="stat-card">
                        <div class="stat-icon bg-info">
                            <i class="fas fa-clock"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="lastUpdate">-</h3>
                            <p>Update Terakhir</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tab Navigation -->
            <ul class="nav nav-tabs nav-tabs-custom mb-4" id="mainTabs" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="borrow-tab" data-bs-toggle="tab" data-bs-target="#borrow" type="button" role="tab">
                        <i class="fas fa-hand-holding"></i> Peminjaman Alat
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="return-tab" data-bs-toggle="tab" data-bs-target="#return" type="button" role="tab">
                        <i class="fas fa-undo"></i> Pengembalian Alat
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="inventory-tab" data-bs-toggle="tab" data-bs-target="#inventory" type="button" role="tab">
                        <i class="fas fa-list"></i> Status Inventaris
                    </button>
                </li>
            </ul>

            <!-- Tab Content -->
            <div class="tab-content" id="mainTabContent">
                <!-- Peminjaman Tab -->
                <div class="tab-pane fade show active" id="borrow" role="tabpanel">
                    <div class="form-card">
                        <div class="form-header">
                            <h4><i class="fas fa-hand-holding"></i> Form Peminjaman Alat</h4>
                            <p>Isi form berikut untuk mencatat peminjaman alat digital</p>
                        </div>
                        
                        <form id="borrowForm" class="needs-validation" novalidate>
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="borrowerName" class="form-label">
                                            Nama Peminjam <span class="text-danger">*</span>
                                        </label>
                                        <input type="text" class="form-control" id="borrowerName" name="borrowerName" required>
                                        <div class="invalid-feedback">Nama peminjam harus diisi</div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="eventName" class="form-label">
                                            Nama Acara/Kegiatan <span class="text-danger">*</span>
                                        </label>
                                        <input type="text" class="form-control" id="eventName" name="eventName" 
                                               placeholder="Contoh: Workshop Fotografi, Presentasi Proyek" required>
                                        <div class="invalid-feedback">Nama acara harus diisi</div>
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="equipmentType" class="form-label">
                                            Jenis Alat <span class="text-danger">*</span>
                                        </label>
                                        <select class="form-select" id="equipmentType" name="equipmentType" required>
                                            <option value="">Pilih jenis alat...</option>
                                            <option value="camera">üì∑ Kamera</option>
                                            <option value="laptop">üíª Laptop</option>
                                            <option value="projector">üìΩÔ∏è Proyektor</option>
                                            <option value="microphone">üé§ Mikropon</option>
                                            <option value="speaker">üîä Speaker</option>
                                            <option value="tablet">üì± Tablet</option>
                                            <option value="monitor">üñ•Ô∏è Monitor</option>
                                            <option value="printer">üñ®Ô∏è Printer</option>
                                            <option value="other">üîß Lainnya</option>
                                        </select>
                                        <div class="invalid-feedback">Jenis alat harus dipilih</div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="equipmentName" class="form-label">
                                            Pilih Alat yang Tersedia <span class="text-danger">*</span>
                                        </label>
                                        <select class="form-select" id="equipmentName" name="equipmentName" required disabled>
                                            <option value="">Pilih jenis alat terlebih dahulu...</option>
                                        </select>
                                        <div class="invalid-feedback">Alat harus dipilih</div>
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="pickupDate" class="form-label">
                                            Tanggal Pengambilan <span class="text-danger">*</span>
                                        </label>
                                        <input type="date" class="form-control" id="pickupDate" name="pickupDate" required>
                                        <div class="invalid-feedback">Tanggal pengambilan harus diisi</div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="pickupTime" class="form-label">
                                            Waktu Pengambilan <span class="text-danger">*</span>
                                        </label>
                                        <input type="time" class="form-control" id="pickupTime" name="pickupTime" required>
                                        <div class="invalid-feedback">Waktu pengambilan harus diisi</div>
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="expectedReturnDate" class="form-label">Perkiraan Tanggal Kembali</label>
                                        <input type="date" class="form-control" id="expectedReturnDate" name="expectedReturnDate">
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="borrowCondition" class="form-label">
                                            Kondisi Alat Saat Dipinjam <span class="text-danger">*</span>
                                        </label>
                                        <select class="form-select" id="borrowCondition" name="borrowCondition" required>
                                            <option value="">Pilih kondisi...</option>
                                            <option value="excellent">‚≠ê Sangat Baik</option>
                                            <option value="good">‚úÖ Baik</option>
                                            <option value="fair">‚ö†Ô∏è Cukup</option>
                                            <option value="poor">‚ùå Kurang</option>
                                            <option value="damaged">üí• Rusak</option>
                                        </select>
                                        <div class="invalid-feedback">Kondisi alat harus dipilih</div>
                                    </div>
                                </div>
                            </div>

                            <div class="mb-3">
                                <label for="borrowNotes" class="form-label">Catatan Tambahan</label>
                                <textarea class="form-control" id="borrowNotes" name="borrowNotes" rows="3" 
                                          placeholder="Catatan khusus, kelengkapan aksesoris, dll..."></textarea>
                            </div>

                            <div class="text-center">
                                <button type="submit" class="btn btn-primary btn-lg">
                                    <i class="fas fa-hand-holding"></i> Catat Peminjaman
                                </button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Pengembalian Tab -->
                <div class="tab-pane fade" id="return" role="tabpanel">
                    <div class="form-card">
                        <div class="form-header">
                            <h4><i class="fas fa-undo"></i> Form Pengembalian Alat</h4>
                            <p>Isi form berikut untuk mencatat pengembalian alat digital</p>
                        </div>
                        
                        <form id="returnForm" class="needs-validation" novalidate>
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="returnBorrowerName" class="form-label">
                                            Nama Peminjam <span class="text-danger">*</span>
                                        </label>
                                        <input type="text" class="form-control" id="returnBorrowerName" name="returnBorrowerName" required>
                                        <div class="invalid-feedback">Nama peminjam harus diisi</div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="returnEquipmentName" class="form-label">
                                            Pilih Alat yang Dipinjam <span class="text-danger">*</span>
                                        </label>
                                        <select class="form-select" id="returnEquipmentName" name="returnEquipmentName" required>
                                            <option value="">Memuat alat yang dipinjam...</option>
                                        </select>
                                        <div class="invalid-feedback">Alat yang dikembalikan harus dipilih</div>
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="returnDate" class="form-label">
                                            Tanggal Pengembalian <span class="text-danger">*</span>
                                        </label>
                                        <input type="date" class="form-control" id="returnDate" name="returnDate" required>
                                        <div class="invalid-feedback">Tanggal pengembalian harus diisi</div>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="returnTime" class="form-label">
                                            Waktu Pengembalian <span class="text-danger">*</span>
                                        </label>
                                        <input type="time" class="form-control" id="returnTime" name="returnTime" required>
                                        <div class="invalid-feedback">Waktu pengembalian harus diisi</div>
                                    </div>
                                </div>
                            </div>

                            <div class="mb-3">
                                <label for="returnCondition" class="form-label">
                                    Kondisi Alat Saat Dikembalikan <span class="text-danger">*</span>
                                </label>
                                <select class="form-select" id="returnCondition" name="returnCondition" required>
                                    <option value="">Pilih kondisi...</option>
                                    <option value="excellent">‚≠ê Sangat Baik</option>
                                    <option value="good">‚úÖ Baik</option>
                                    <option value="fair">‚ö†Ô∏è Cukup</option>
                                    <option value="poor">‚ùå Kurang</option>
                                    <option value="damaged">üí• Rusak</option>
                                </select>
                                <div class="invalid-feedback">Kondisi alat harus dipilih</div>
                            </div>

                            <div class="mb-3">
                                <label for="returnNotes" class="form-label">Catatan Pengembalian</label>
                                <textarea class="form-control" id="returnNotes" name="returnNotes" rows="3" 
                                          placeholder="Catatan kondisi alat, masalah yang ditemukan, dll..."></textarea>
                            </div>

                            <div class="text-center">
                                <button type="submit" class="btn btn-success btn-lg">
                                    <i class="fas fa-undo"></i> Catat Pengembalian
                                </button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Inventaris Tab -->
                <div class="tab-pane fade" id="inventory" role="tabpanel">
                    <div class="form-card">
                        <div class="form-header">
                            <h4><i class="fas fa-list"></i> Status Inventaris Real-time</h4>
                            <p>Status terkini semua alat digital yang tersedia</p>
                        </div>
                        
                        <!-- Filter Options -->
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <select class="form-select" id="inventoryFilter">
                                    <option value="">Semua Jenis Alat</option>
                                    <option value="camera">üì∑ Kamera</option>
                                    <option value="laptop">üíª Laptop</option>
                                    <option value="projector">üìΩÔ∏è Proyektor</option>
                                    <option value="microphone">üé§ Mikropon</option>
                                    <option value="speaker">üîä Speaker</option>
                                    <option value="tablet">üì± Tablet</option>
                                    <option value="monitor">üñ•Ô∏è Monitor</option>
                                    <option value="printer">üñ®Ô∏è Printer</option>
                                    <option value="other">üîß Lainnya</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <select class="form-select" id="statusFilter">
                                    <option value="">Semua Status</option>
                                    <option value="available">Tersedia</option>
                                    <option value="borrowed">Dipinjam</option>
                                </select>
                            </div>
                        </div>

                        <!-- Inventory Table -->
                        <div class="table-responsive">
                            <table class="table table-hover" id="inventoryTable">
                                <thead class="table-dark">
                                    <tr>
                                        <th>Nama Alat</th>
                                        <th>Jenis</th>
                                        <th>Status</th>
                                        <th>Kondisi</th>
                                        <th>Peminjam</th>
                                        <th>Update Terakhir</th>
                                    </tr>
                                </thead>
                                <tbody id="inventoryTableBody">
                                    <tr>
                                        <td colspan="6" class="text-center">
                                            <div class="spinner-border text-primary" role="status">
                                                <span class="visually-hidden">Loading...</span>
                                            </div>
                                            <p class="mt-2">Memuat data inventaris...</p>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/config.js"></script>
    <script src="js/cache.js"></script>
    <script src="js/api.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
